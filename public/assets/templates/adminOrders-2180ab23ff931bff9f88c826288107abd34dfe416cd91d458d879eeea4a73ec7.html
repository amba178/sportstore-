<div ng-controller="ordersCtrl">
<div ng-if="loading">
 	<div class="col-md-11 col-xs-10 col-xs-offset-1 col-md-offset-1">
 	    <aside class="progress">
 			<div class="progress-bar progress-bar-striped active" style="width: 100%">
 				Loading Orders...
 			</div>
 		</aside>
    </div>
</div>
 	<div ng-if="!loading">
	    <table class="table table-striped table-bordered">
	        <tr><th>Name</th><th>City</th><th>Value</th><th></th></tr>
	        <tr ng-repeat="order in orders">
	            <td>{{order.name}}</td>
	            <td>{{order.city}}</td>
	            <td>{{calcTotal(order) | currency}}</td>
	            <td>
	                <button ng-click="selectOrder(order)" class="btn btn-xs btn-primary">
	                    Details
	                </button>
	            </td>
	        </tr>
	    </table>
    </div>

    <div ng-show="selectedOrder">
        <h3>Order Details</h3>

        <table class="table table-striped table-bordered">
            <tr><th>Name</th><th>Count</th><th>Price</th></tr>
            <tr ng-repeat="item in selectedOrder.products">
                <td>{{item.name}}</td>
                <td>{{selectedOrder.order_lines[$index].count}}</td>
                <td>{{item.price| currency}} </td>
            </tr>
        </table>
    </div>
</div>
